<!DOCTYPE html>
<html>
<body>

<h1>Advent Day 6</h1>

  <input type="file" id = "inputfile" name="inputfile">

<pre id="output"></pre> 
<button onclick = "calculate()">Calculate</button>
<p id = "calc">None</p>

</body>

<script>



var file = document.getElementById('inputfile');

 var txtArr = [];
file.addEventListener('change', () => {
    var fr = new FileReader();
    fr.onload = function() {
        // By lines
        var lines = this.result.split('\n');
        for (var line = 0; line < lines.length; line++) {
            txtArr = [...txtArr, ...(lines[line].split("\n"))];
        }
    }
    fr.onloadend = function() {
        console.log(txtArr);
        document.getElementById('output').textContent=txtArr;
    }

    fr.readAsText(file.files[0]);
})

function calculate(){
	var currentTotal = 0;
	
	for(var i = 0; i < txtArr.length; i++){
		for(var j = 0; j<txtArr[i].length-14; j++){
			var cSet = new Set([txtArr[i][j],txtArr[i][j+1],txtArr[i][j+2],txtArr[i][j+3],txtArr[i][j+4],txtArr[i][j+5],txtArr[i][j+6],txtArr[i][j+7],txtArr[i][j+8],txtArr[i][j+9],txtArr[i][j+10],txtArr[i][j+11],txtArr[i][j+12],txtArr[i][j+13],txtArr[i][j+14]]);
			//alert(txtArr[i]);
			//alert(txtArr[i][j]);
			if(cSet.size == 14){
				currentTotal=j+15;
				alert(cSet);
				break;
			}
		}
	}

	
	document.getElementById("calc").innerHTML = currentTotal;
	
}

</script>
</html>